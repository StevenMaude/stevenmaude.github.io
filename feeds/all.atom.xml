<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>stevenmaude.co.uk</title><link href="http://www.stevenmaude.co.uk/" rel="alternate"></link><link href="http://www.stevenmaude.co.uk/feeds/all.atom.xml" rel="self"></link><id>http://www.stevenmaude.co.uk/</id><updated>2017-05-01T15:02:00+01:00</updated><entry><title>Learning LaTeX: why and how</title><link href="http://www.stevenmaude.co.uk/posts/learning-latex-why-and-how" rel="alternate"></link><published>2017-05-01T15:02:00+01:00</published><updated>2017-05-01T15:02:00+01:00</updated><author><name>Steven Maude</name></author><id>tag:www.stevenmaude.co.uk,2017-05-01:posts/learning-latex-why-and-how</id><summary type="html">&lt;h2 id="sharelatex"&gt;ShareLaTeX&lt;/h2&gt;
&lt;p&gt;Today I saw &lt;a href="https://www.sharelatex.com/learn/Learn_LaTeX_in_30_minutes"&gt;this
documentation&lt;/a&gt;
from ShareLaTeX linked on Hacker News and, as I haven't used LaTeX in a
while, thought I'd quickly skim through to see what I remembered. And I
started reminiscing about LaTeX which I'd been using semi-regularly
around a decade ago, eventually writing a circa 300 page thesis with it.&lt;/p&gt;
&lt;p&gt;If you've never encountered it before, LaTeX is a free software project
that is described by the &lt;a href="https://www.latex-project.org"&gt;project's site&lt;/a&gt;
as:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;a high-quality typesetting system; it includes features designed for
the production of technical and scientific documentation.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;There's nothing to stop you using it for other types of documents too;
those are just the areas where it's traditionally used, particularly in
academic circles.&lt;/p&gt;
&lt;p&gt;Back to ShareLaTeX. First, the ShareLaTeX documentation looks pretty
good if you need something to get you started.&lt;/p&gt;
&lt;p&gt;I haven't used ShareLaTeX recently although I think I tried it out a few
years back and it seemed fine enough. It's a web app that lets you
prepare LaTeX documents and, if you pay, collaborate on them. One big
advantage I can see of using a web app for LaTeX beginners is that it
removes one of the barriers of starting with LaTeX: installing
everything.&lt;/p&gt;
&lt;h2 id="installing-latex-on-windows"&gt;Installing LaTeX on Windows&lt;/h2&gt;
&lt;p&gt;I've not had cause to use LaTeX much recently, so haven't tried
installing on Ubuntu; a lot of my writing is done via Markdown, whether
technical documentation or words like the ones you're reading now on my
blog.&lt;/p&gt;
&lt;p&gt;On Windows, it used to be reasonably simple to get a working system with
&lt;a href="http://www.texniccenter.org"&gt;TeXnicCenter&lt;/a&gt; and
&lt;a href="https://miktex.org"&gt;MikTeX&lt;/a&gt;, but you'd still have to get a PDF viewer,
like &lt;a href="https://www.sumatrapdfreader.org"&gt;SumatraPDF&lt;/a&gt; integrated into that
for previewing. This &lt;a href="https://tex.stackexchange.com/questions/116981/how-to-configure-texniccenter-2-0-with-sumatra-2013-2016-version"&gt;Stack Exchange
answer&lt;/a&gt;
may help with integrating the PDF preview.&lt;/p&gt;
&lt;p&gt;Though that's still three different bits of software you have to get
working together, so not a trivial task by any means. From memory,
install MikTeX first, as TeXnicCenter can detect it during install and
configure its own settings to use your MikTeX installation without you
needing to set things up by hand.&lt;/p&gt;
&lt;h2 id="starting-out"&gt;Starting out&lt;/h2&gt;
&lt;p&gt;The ShareLaTeX documentation just starts out with creating a basic
document and has you working through following their example. That's
fine to see things piece by piece. Beyond that the single suggestion I'd
have for a new user to learn effectively is to take a completed document
you have written, representative of what you'd like to create using
LaTeX, and then &lt;strong&gt;struggle through recreating that existing document in
LaTeX&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;And it may well be a struggle, but this has a few benefits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;It's presumably a finished work, so you don't have any time pressure
  for completion. With a deadline to meet, as soon as you encounter
  issues with LaTeX, you'll likely fall back to whatever word processor
  or document creator you're comfortable with to get the job done, and
  then give up on learning LaTeX.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Using a document similar to that you'd usually be writing, you'll
  encounter many of the issues in LaTeX that you'd hit doing so, and can
  solve these without the aforementioned time pressure.&lt;/p&gt;
&lt;p&gt;In my experience, it was graphics and, especially, table layouts
that caused the most problems, but you may have particular
typography requirements that require some package to be installed,
or some subtle override of the LaTeX defaults to change.&lt;/p&gt;
&lt;p&gt;Finding these solutions is not always quick, but I imagine there are
more forum posts, &lt;a href="https://tex.stackexchange.com/"&gt;Stack Exchange&lt;/a&gt;
questions and blog posts around than there were when I started, so
it's likely someone's encountered and asked about the same issue
you're dealing with. The LaTeX Community forum was also a good
source of helpful solutions from knowledgable people even in its
early days ten years ago, and &lt;a href="http://latex.org/forum/"&gt;still lives on
today&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A completed document gives you a reference for getting started in
  future.  You can use it as the basis for a new document, instead of
  starting from nothing, or you can just refer back to it and copy and
  paste appropriate bits of formatting markup you need.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="latex-versus-word"&gt;LaTeX versus Word&lt;/h2&gt;
&lt;h3 id="latex-installation"&gt;LaTeX installation&lt;/h3&gt;
&lt;p&gt;As I saw it when learning back in 2007ish, LaTeX was more difficult to
get started with than the likes of conventional word processors: the
installation isn't trivial, and you need several things other than your
desired text in a LaTeX document before you can get that text to
display. In a word processor, you can just start typing. So there's some
level of competence you need just to make &lt;em&gt;any&lt;/em&gt; old document, let alone
the one you actually want to make.&lt;/p&gt;
&lt;h3 id="word-woes"&gt;Word woes&lt;/h3&gt;
&lt;p&gt;Word is easy to get started with, but Word had, and maybe still has, its
own problems: again, going back to 2007, to when Word 2003 was still
popular, referencing support was limited, that you'd use external tools
for (e.g. EndNote or &lt;a href="https://www.zotero.org/"&gt;Zotero&lt;/a&gt;).  I'm not sure
how Word looks with respect to that now.&lt;/p&gt;
&lt;p&gt;Back then, Word seemed to struggle and be sluggish with large documents
with lots of images, which was always fun. Again, maybe that's improved
in recent versions? When editing LaTeX, you're only editing the source
markup in whatever text editor you choose to use, and this source, even
for a lengthy document, will be relatively small; images for LaTeX are
stored entirely separately from the source. &lt;/p&gt;
&lt;p&gt;Another issue with Word is ensuring formatting styles are correctly and
consistently applied to text. You can create styles, but you then have
to apply them by hand, selecting the text. Sometimes you may delete
spacing between words and suddenly you have to reapply a styling, as the
text has changed to the style of its neighbours. In LaTeX, anything to
do with formatting is specified explicitly in the markup, making it easy
to see that the correct styling is applied to the text.  Furthermore,
the LaTeX defaults are usually decent, not always perfect, but decent.&lt;/p&gt;
&lt;h3 id="the-good-and-bad-of-latex"&gt;The good and bad of LaTeX&lt;/h3&gt;
&lt;p&gt;This explicitness and strictness of LaTeX is good and bad. It means that
you know what is intended for your text, but it also means that it's
possible for you to break your document sufficiently such that it cannot
be rendered correctly, or sometimes even at all, by LaTeX.&lt;/p&gt;
&lt;p&gt;If you've done programming and are used to finding and correcting your
inevitable mistakes, this isn't unusual. But the idea of having written
a document that you can't then display in the intended output format may
be an intimidating concept to new users. Likewise, the error messages
can be numerous and formal, and not much help to novice users.&lt;/p&gt;
&lt;p&gt;Tricks known to programmers like a regular edit-compile cycle to ensure
you find issues as you create them, or commenting out markup to isolate
the specific parts of markup that are the cause of difficult to
understand problems are useful skills. (These ways of working are
perhaps a result of the creators of LaTeX — and TeX, which LaTeX is
built on — being computer scientists.) However, these concepts may not
be immediately obvious by users with little experience of coding who
just want to get on with writing, and don't want tools getting in the
way.&lt;/p&gt;
&lt;p&gt;On the other hand, working just with the LaTeX source and focusing on
the text alone seems much more productive to me. You can concentrate on
content first, and fix up the presentation at the end. Otherwise, I find
that working alongside the printed document layout presents me with the
continuous distraction of making things look "right", fixing incorrect
formatting or alignments, even though the content in question could be
modified or removed entirely during later editing. This time might be
better spent just writing.&lt;/p&gt;
&lt;p&gt;Talking of layout, in my opinion, a LaTeX document using defaults will
be much more pleasant to read than a Word document using defaults. To
some extent, in both cases, this can somewhat depend on templates that
you may choose to create your document, but a default LaTeX document has
more of the look of a professionally typeset book.&lt;/p&gt;
&lt;p&gt;Finally, many useful additions to LaTeX come in the form of a huge range
of additional packages you can install to add new commands and features.
Again, this is a mixed blessing. First, you need to be aware that they
even exist — &lt;a href="https://tex.stackexchange.com/questions/553/what-packages-do-people-load-by-default-in-latex"&gt;lists like
this&lt;/a&gt;
can help: there may be a package perfect for what you're trying to do,
but you just haven't discovered it yet. Another hassle is that you can
have incompatibility issues between certain packages, or they may
require to be loaded in a certain order. Fixing problems like these is
time, again, spent on tools, not on writing.&lt;/p&gt;
&lt;p&gt;You do need to be careful of package updates. Mostly these should be
benign, but in one case I experienced, a package update suddenly broke
my document, and I had to spend time discovering the problem and
reverting the package version.  (My memory's hazy, but I think this was
complicated by MikTeX only having the latest package versions, so in the
end I think that I had to download from elsewhere and install by hand.)
This may be an issue for compiling documents if you return to them much
later in the future: if any of the packages have broken their backwards
compatibility, you may be stuck. There's also no easy way that I was
aware of to pin package versions, like you might in a &lt;a href="https://packaging.python.org/requirements/"&gt;Python
setup.py&lt;/a&gt; file.&lt;/p&gt;
&lt;h2 id="do-you-still-need-to-learn-latex-these-days"&gt;Do you still need to learn LaTeX these days?&lt;/h2&gt;
&lt;p&gt;Since I learned LaTeX, software like &lt;a href="http://pandoc.org/"&gt;pandoc&lt;/a&gt; has
appeared and made it simple to write in other formats — for instance,
Markdown, reStructuredText, or HTML — and convert that to LaTeX.
&lt;a href="https://en.wikipedia.org/wiki/Markdown"&gt;Markdown&lt;/a&gt; in particular is very
simple, and easy to learn.&lt;/p&gt;
&lt;p&gt;For relatively straightforward documents, that's an alternative to give
you the benefit of nicely typeset output, without having to bother
writing LaTeX directly. This can give you a handy subset of LaTeX in
potentially a simpler markup, especially with Markdown.&lt;/p&gt;
&lt;p&gt;However, LaTeX remains flexible and powerful and, especially for
creating more complicated documents, it still retains popularity more
than thirty years after its first development. Furthermore, it's also
released under an open source license (the LaTeX Project Public License)
so these professional-level tools are available to everyone at no cost.
If you have the likes of long reports or a thesis to write, it's
certainly still worth a look.&lt;/p&gt;</summary><category term="LaTeX"></category><category term="document preparation"></category><category term="word processor"></category></entry><entry><title>Building a music collection on a budget</title><link href="http://www.stevenmaude.co.uk/posts/building-a-music-collection-on-a-budget" rel="alternate"></link><published>2017-04-04T13:55:00+01:00</published><updated>2017-04-04T13:55:00+01:00</updated><author><name>Steven Maude</name></author><id>tag:www.stevenmaude.co.uk,2017-04-04:posts/building-a-music-collection-on-a-budget</id><summary type="html">&lt;p&gt;A couple of months back I wrote something on trying to find inexpensive music
for DJ sets for DJ TechTools which just &lt;a href="http://djtechtools.com/2017/04/02/dj-music-for-a-budget-beatmatcher/"&gt;got posted
there&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;There's another two tips here that I didn't think to include there.&lt;/p&gt;
&lt;h2 id="amazon-primes-no-rush-delivery"&gt;Amazon Prime's No-Rush delivery&lt;/h2&gt;
&lt;p&gt;At least in the UK, if you have an Amazon Prime account, and you buy things
shipped from Amazon, currently you're probably eligible to opt for a &lt;a href="https://www.amazon.co.uk/gp/help/customer/display.html?nodeId=201910750"&gt;slower
delivery&lt;/a&gt;
with the benefit of a £1 digital credit applied to your account.&lt;/p&gt;
&lt;p&gt;This credit can be used for music purchases, and as individual MP3s on Amazon
are often just 99p or less, that usually means you can pick up a track for free
in addition to whatever you actually were ordering in the first place.&lt;/p&gt;
&lt;p&gt;It's possible to further benefit from this too. When you're planning an order
of multiple eligible items, breaking that one order up into orders of
individual items allows you to multiply the credit by the number of items.&lt;/p&gt;
&lt;p&gt;Make sure you do use the credit though since they expire after some time. It's
maybe worth keeping a want list to ensure you know exactly what to spend your
next credit on.&lt;/p&gt;
&lt;h2 id="compilations-can-be-competitively-priced"&gt;Compilations can be competitively priced&lt;/h2&gt;
&lt;p&gt;With compilations, you'll often find that, versus buying individual tracks,
you'll get more value for money, and can be a quick way to build up a
collection, especially if you're looking for well-known hits.&lt;/p&gt;
&lt;p&gt;If there are, say, five tracks that you're after on a compilation, and you get
another fifty or so bundled in for a few pounds more than buying the five
individual digital tracks, that's not a bad deal.&lt;/p&gt;
&lt;p&gt;Sometimes you get the case where the CD version of the compilation
contains mixes, whereas the digital version may have the mixes (which
you probably don't care about too much; there are more mixes around than
I'd ever have time to listen to) and the individual tracks (which you do
want).&lt;/p&gt;
&lt;p&gt;I don't want to sound like I'm just advertising Amazon here, as it may
be that other digital music stores offer the same kind of deals,
although I've not investigated them. But, Amazon can be particularly
competitive, again when you "arbitrage" buying MP3s via lower priced CDs
which feature
&lt;a href="https://www.amazon.co.uk/gp/help/customer/display.html?nodeId=201377450"&gt;AutoRip&lt;/a&gt;
bundled MP3s, as I mentioned in the &lt;a href="http://djtechtools.com/2017/04/02/dj-music-for-a-budget-beatmatcher/"&gt;original DJ TechTools
post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;As an example: at the time of writing, &lt;a href="https://www.amazon.co.uk/I-Love-Garage-Various-Artists/dp/B0163D5WEQ/"&gt;this
compilation&lt;/a&gt;
is £5 for the CD &lt;strong&gt;which has MP3s provided via AutoRip&lt;/strong&gt;, versus £9.99 for
the MP3 version. Seeing Roy Davis Jr's Gabriel on there, you might think
that £5 for just that track is worth paying, but there are another 65
tracks on there too.&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt; Surprisingly, there's very little filler on
there, and while there are a few radio edits on there, most tracks are
the full length versions.&lt;/p&gt;
&lt;p&gt;The bonus here is that you also get instant digital delivery on the
bundled MP3s when buying the CD version too. The only differences are
that you've paid less and get a redundant bit of plastic through the
post a few days later.&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Since it was such ridiculously good value, I just impulse bought that
  compilation.&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</summary><category term="DJ"></category><category term="MP3"></category><category term="music"></category></entry><entry><title>Type:Rider: A Re:view</title><link href="http://www.stevenmaude.co.uk/posts/typerider-a-review" rel="alternate"></link><published>2017-03-29T00:31:00+01:00</published><updated>2017-03-29T00:31:00+01:00</updated><author><name>Steven Maude</name></author><id>tag:www.stevenmaude.co.uk,2017-03-29:posts/typerider-a-review</id><summary type="html">&lt;h2 id="a-journey-through-history"&gt;A journey through history&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Typography is ubiquitous and present in our daily lives, often without even
noticing it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That's a quote from &lt;a href="http://typerider.arte.tv/"&gt;Type:Rider&lt;/a&gt;, what the
developers call a "game documentary" and what I'd call a slightly frustrating,
albeit compelling museum-style whistle stop tour through fonts and typography
across human civilisation.&lt;/p&gt;
&lt;p&gt;But the quote is spot on. Typography is everywhere, and though that's difficult
to imagine for us today — just take a look around — it wasn't always like that.&lt;/p&gt;
&lt;p&gt;Type:Rider goes on a journey from cave paintings, through to early writing
systems, such as cuneiform and hieroglyphics, then onwards to the spread of
printing across late medieval Europe, and the continued development of fonts,
typography, all the way to the current age where words being marked on media
has made way for being displayed on screen instead. So then, this is as much a
study of the spread of information.&lt;/p&gt;
&lt;p&gt;Not only is it a journey through history for the player, but for the two dots
comprising a colon that the player controls. They roll along the level and can,
somewhat inexplicably, jump and wall jump.&lt;/p&gt;
&lt;h2 id="typerider-is-no-nightsky"&gt;Type:Rider is no NightSky&lt;/h2&gt;
&lt;p&gt;Why two dots when, say, a full stop could have sufficed? Perhaps that's to
avoid accusations of being a clone of Nifflas' relaxing
&lt;a href="http://nifflas.ni2.se/?page=NightSky"&gt;NightSky&lt;/a&gt;. If anything, the extra dot is
a hindrance; it makes the clumsy platforming even clumsier, and doesn't really
add anything to the gameplay.&lt;/p&gt;
&lt;p&gt;Extra dot aside, it is reminiscent of NightSky (itself a game you should check
out) and I think the difficulty and the slightly sparse, often monochrome
foreground level layouts are why comparisons are drawn to Playdead's
&lt;a href="http://www.playdead.com/games/limbo/"&gt;Limbo&lt;/a&gt;. That, as well as the difficulty.
The difficulty is another reason that Type:Rider seems to get compared to
Trials, but this is a more loose association only. The Trials games are finely
balanced and tuned, so as to allow for mastery of very delicate, precise
controls. Type:Rider, unfortunately, is not. Quite often you'll end up bouncing
off uselessly from walls, or find your &lt;a href="https://www.youtube.com/watch?v=xfKhDiUNOG0"&gt;pitiful leaps are insufficient to jump
the chasms&lt;/a&gt; that you need to.&lt;/p&gt;
&lt;p&gt;OK. It's not actually that glitchy — it's definitely no &lt;a href="https://www.youtube.com/watch?v=3MWEHwvcnyM"&gt;Sonic the Hedgehog
2006&lt;/a&gt; — but the floatiness of how
the dots "jump" and move, mean that there are some sections that are
frustrating where you'll repeatedly bounce to your doom. With the addition of a
couple of cheap instant death sections which seem like they were thrown in as
attempts to add tension, it would have been just nicer to have a relaxing, easy
to progress through, game.&lt;/p&gt;
&lt;p&gt;On the plus side, restarts are quick and the checkpoints frequent, so it's rare
that you find yourself repeating familiar ground. It does still break the flow
of what would be an otherwise relaxing experience, but this at least tempers
player frustration. &lt;/p&gt;
&lt;h2 id="but-typeriders-still-worth-a-look"&gt;But Type:Rider's still worth a look&lt;/h2&gt;
&lt;p&gt;That's all a pity, because the actual atmosphere, that of something like a very
immersive museum exhibit is a pleasant one. The graphic designs of the levels,
and the integration of fonts into them, are well thought out, and thematically
cohesive in the ideas they're trying to portray and show imagination. The
historical background is provided via brief, but informative, texts that are
collected throughout the levels.&lt;/p&gt;
&lt;p&gt;There are some peculiar issues, likely due to a quickly thrown together English
localisation. There is one notably particularly bad translation that recurs
throughout: the term &lt;em&gt;wheelbase&lt;/em&gt; peculiarly gets mentioned in the text several
times. The Steam discussion forum for the game actually answered this: it's a
&lt;a href="https://www.collinsdictionary.com/dictionary/french-english/empattement"&gt;badly proofread
translation&lt;/a&gt;:
it should be &lt;em&gt;serif&lt;/em&gt;. Likewise, there are some weird text kerning issues in the
history text too, and it's likely that these too don't occur in the French
original. But that's an oversight considering that the game is dealing with
typography.&lt;/p&gt;
&lt;p&gt;The scope of the game means that it is limited to telling a few stories, but as
an introduction to some of the big names in history and the technological
advances made, it does a good job. It is interesting just how important the
onset of widespread dissemination of information has been, and the impact that
has had since. We take the immediacy of that for granted now — you could well
be reading this text that I wrote seconds after I published it on this site,
wherever you are in the world — but the distribution of printed works on any
useful scale wasn't even a concept until the late medieval period, just a few
hundred years ago. It's difficult to comprehend that when information is so
central to society now.&lt;/p&gt;
&lt;p&gt;It's also interesting where Type:Rider leaves off, which is the development of
&lt;a href="https://en.wikipedia.org/wiki/Generalized_Markup_Language"&gt;markup languages&lt;/a&gt;,
and computer bitmap and vector fonts. A really big omission, perhaps because it
was made a few years ago, back in 2013, is emoji. (However, emoji were big
enough in 2013 to make it into the &lt;a href="http://public.oed.com/the-oed-today/recent-updates-to-the-oed/previous-updates/december-2013-update/new-words-katherine-martin/"&gt;Oxford English
Dictionary&lt;/a&gt;.)
Electronic communication saw the incorporation of emoticons, constructed from
text to hint at tone where plain text may be ambiguous. That's been followed by
the widespread use of emoji, where characters visually represent concepts or
objects, and so that nicely brings us full circle: modern day communication
harking back to how writing systems first began.&lt;/p&gt;
&lt;p&gt;If the idea of spending a couple of hours learning about typography is
something that sounds appealing, Type:Rider's worth spending the time with.
Just take the gameplay for what it is, which is occasionally relaxing,
sometimes frustrating, be prepared to work through the trickier sections. It's
certainly hard to dislike a work that even manages to make a valiant attempt of
painting &lt;a href="https://www.theguardian.com/artanddesign/2017/mar/28/how-we-made-font-comic-sans-typography"&gt;Comic Sans
MS&lt;/a&gt;
in a somewhat sympathetic light.&lt;/p&gt;</summary><category term="game"></category><category term="review"></category></entry><entry><title>If you want my money, please state your payment processor clearly</title><link href="http://www.stevenmaude.co.uk/posts/if-you-want-my-money-please-state-your-payment-processor-clearly" rel="alternate"></link><published>2017-03-06T23:30:00+00:00</published><updated>2017-03-06T23:30:00+00:00</updated><author><name>Steven Maude</name></author><id>tag:www.stevenmaude.co.uk,2017-03-06:posts/if-you-want-my-money-please-state-your-payment-processor-clearly</id><summary type="html">&lt;p&gt;Today I got a nice letter in the post informing me that my vehicle tax
was due. Wonderful news.&lt;/p&gt;
&lt;p&gt;Maybe not.&lt;/p&gt;
&lt;p&gt;Still, off I dutifully went to the appropriate &lt;a href="https://gov.uk"&gt;GOV.UK&lt;/a&gt;
site to pay the tax: it's not like it's an option if you want to keep
your car on the road legally.&lt;/p&gt;
&lt;p&gt;If you're not in the UK, or you are but haven't taxed a vehicle
recently, it's quite simple. They send you a paper reminder. This is
also a form that you can take into a Post Office and pay there.&lt;/p&gt;
&lt;p&gt;Paying this online, you're asked for a reference number from the
reminder. There's a check made that your car has a valid &lt;a href="https://en.wikipedia.org/wiki/MOT_test"&gt;MOT
certificate&lt;/a&gt; (which establishes
your vehicle's roadworthiness) and then asks you for payment.&lt;/p&gt;
&lt;p&gt;Because I'm using
&lt;a href="http://www.stevenmaude.co.uk/posts/taking-control-of-chromium-and-chrome"&gt;uMatrix&lt;/a&gt; in
my browser, I can spot which sites other than the one I'm directly
visiting have content which is supposed to be loaded into the current
page. The payment form didn't initially load and I noticed a blocked
site: "ephapay.net".&lt;/p&gt;
&lt;p&gt;OK, I've never heard of them: let's check them out and make sure they're
someone I can trust. I didn't anticipate that the UK government's
website would be using someone dodgy, but best to check anyway.&lt;/p&gt;
&lt;p&gt;A few searches via web search engines didn't reveal anything about this
domain. Even weirder, the WHOIS information is all hidden by a privacy
service:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Admin Name: PERFECT PRIVACY, LLC&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Surely a legitimate payment processor wouldn't hide their details?&lt;/p&gt;
&lt;p&gt;What did reveal who was operating the site was right at the end of the
WHOIS information, in the name server details:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Name Server: NS1.THE-LOGIC-GROUP.COM&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;and turns out to be benign. They're a payment processor that got
acquired by Barclaycard in 2014. And I've heard of Barclaycard&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt;. And
the WHOIS information for the-logic-group.com actually points to their
business address. So, it seems that at least they're a established
company (since 1988, a Companies House search will tell you).&lt;/p&gt;
&lt;p&gt;But I had to dig through to establish all that. It would have been much
easier if the GOV.UK vehicle tax site just stated clearly who the
payment processor is. I almost considered just reverting to paying the
tax in person when I first encountered the mysterious site.&lt;/p&gt;
&lt;p&gt;What the UK government has going for them is that road users who want to
stay legal must pay this, so one way or another, online or offline,
they'll get your cash.&lt;/p&gt;
&lt;p&gt;But there are other sites that have similar behaviour and don't have a
captive audience. There have been several cases where I'm interested in
paying for a product or service, and hit some anonymous looking page or
iframe pointing somewhere else, where it's down to my browser showing
details of blocked requests and content that reveal who's handling
payment (yes, of course, you could also search in the source too).&lt;/p&gt;
&lt;p&gt;In my case, common culprits of having vague payment pages are sites that
handle ticket payments for small shows, or sites that let you book a
place at running events. I'm sure there are more. And it really does
deter me: if I'm not sure if my payment details are safe, I'd rather not
bother, especially if it's something I can live without.&lt;/p&gt;
&lt;p&gt;If you're designing a website, bear this in mind: for the sake of
placing a small, clear explanation of how payment works, and why the
user should trust you and your payment processor, you can remove another
stumbling block that you're putting in the way of getting more paranoid
or technically savvy users to give you money.&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;If nothing else, you have them to thank/blame for inspiring Rowan
Atkinson's Johnny English.&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</summary><category term="security"></category><category term="UI"></category><category term="UX"></category></entry><entry><title>Fixing horrible wireless network pings in Ubuntu (2017 edition)</title><link href="http://www.stevenmaude.co.uk/posts/fixing-horrible-wireless-network-pings-in-ubuntu-2017-edition" rel="alternate"></link><published>2017-03-03T16:44:00+00:00</published><updated>2017-03-03T16:44:00+00:00</updated><author><name>Steven Maude</name></author><id>tag:www.stevenmaude.co.uk,2017-03-03:posts/fixing-horrible-wireless-network-pings-in-ubuntu-2017-edition</id><summary type="html">&lt;p&gt;Today I was using my laptop on battery power and I remembered that I
hadn't disabled wifi power management since I reinstalled Ubuntu in
late 2016. With power management enabled for wifi, I find I get laggy
internet on battery power, and pings are noticeably higher.&lt;/p&gt;
&lt;p&gt;If you suspect this is affecting you, it's easy to check:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ iwconfig 2&amp;gt; /dev/null &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="s2"&gt;&amp;quot;Power Management&amp;quot;&lt;/span&gt;
Power Management:on
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Unfortunately, the &lt;a href="http://www.stevenmaude.co.uk/posts/horrible-wireless-network-pings-in"&gt;method I wrote about
previously to disable wifi power
management&lt;/a&gt; no
longer works. My guess is that this is due to Ubuntu switching to
systemd in 2015.&lt;/p&gt;
&lt;p&gt;Instead, you need to use an alternative approach as &lt;a href="https://gist.github.com/jcberthon/ea8cfe278998968ba7c5a95344bc8b55"&gt;suggested in this
post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;First, look at your existing configuration:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; /etc/NetworkManager/conf.d/
$ ls
default-wifi-powersave-on.conf
$ sudo cp default-wifi-powersave-on.conf wifi-powersave-off.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The new .conf filename must follow any other files alphabetically, in
this case the filename must be one that's alphabetically later than
&lt;code&gt;default-wifi-powersave-on&lt;/code&gt;, so that it gets applied last, and your
modified setting overrides the default. If we named this file, e.g.
&lt;code&gt;a-wifi-powersave-off-config.conf&lt;/code&gt;, our new settings wouldn't apply
since the filename would then be ahead of
&lt;code&gt;default-wifi-powersave-on.conf&lt;/code&gt; alphabetically.&lt;/p&gt;
&lt;p&gt;Now, edit the new file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudoedit wifi-powersave-off.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Change what is likely a 3 in the &lt;code&gt;wifi.powersave&lt;/code&gt; line to 2. This
disables wireless power management.&lt;/p&gt;
&lt;p&gt;It likely will look like this when you've edited it:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[connection]
wifi.powersave = 2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now, restart NetworkManager and you should see that this change is now
in effect. It should also persist across reboots. You can confirm this
again with &lt;code&gt;iwconfig&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo systemctl restart NetworkManager
$ iwconfig 2&amp;gt; /dev/null &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="s2"&gt;&amp;quot;Power Management&amp;quot;&lt;/span&gt;
Power Management:off
&lt;/pre&gt;&lt;/div&gt;</summary><category term="high"></category><category term="ping"></category><category term="latency"></category><category term="wireless"></category><category term="wifi"></category><category term="Ubuntu"></category></entry><entry><title>The dangers of long forgotten Bitbucket team accounts</title><link href="http://www.stevenmaude.co.uk/posts/the-dangers-of-long-forgotten-bitbucket-team-accounts" rel="alternate"></link><published>2017-02-04T21:30:00+00:00</published><updated>2017-02-04T21:30:00+00:00</updated><author><name>Steven Maude</name></author><id>tag:www.stevenmaude.co.uk,2017-02-04:posts/the-dangers-of-long-forgotten-bitbucket-team-accounts</id><summary type="html">&lt;p&gt;Last month, I'd been reviewing some of the shared accounts for online
services we have at work. Often, users have an individual login for
online services. Some services don't offer that feature and there's a
single account that's shared by everyone. While digging around, I found
details for a shared Bitbucket account. If everyone has their own
Bitbucket account, then what's this one?&lt;/p&gt;
&lt;p&gt;Logging in worked, and allowed me access to an account for the team
itself; there was no user, as such. Not only could this team account
access the team, but with full permissions. Furthermore, this account
had no settings of its own. If you accessed the settings page, you got
the team's settings, not that of this team account, so it wasn't
possible to change any security settings for the account.&lt;/p&gt;
&lt;p&gt;With one of these "legacy" accounts lying around, it's possible that it
is sat there with only password authentication — Bitbucket &lt;a href="https://blog.bitbucket.org/2015/09/10/two-step-verification-is-here/"&gt;introduced
two-factor
authentication&lt;/a&gt;
late, in 2015 — an unchangeable (and maybe weak, depending on your
policies) password, and with full team access.&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;What makes this particularly insidious is that if you're not aware of
this account, you'll be blissfully unaware if you look at the list of
users on your team. Even if you manage the team as an administrator,
&lt;strong&gt;this team account didn't appear as an admin user&lt;/strong&gt;. I don't even think
it counts as a billed user. Someone who gains access presumably could
maintain that silently without you being able to do anything about it,
at least if they just sat there cloning your code. Mitigating that is
the audit log which would be a giveaway if anything noisy happened. By
that point though, someone malicious could still cause a lot of problems
for you by, let's say, booting out all other team members, or deleting
all your repositories.&lt;/p&gt;
&lt;p&gt;In the end, I had to contact support and request them to remove this
account, since there was no way I could fix this as a team
administrator. Therefore, this is definitely something worth auditing if
you think you might have such dormant accounts, even though, according
to Atlassian, this shouldn't be the case at all. They &lt;a href="https://blog.bitbucket.org/2014/01/14/important-changes-are-coming-to-teams/"&gt;earlier
stated&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Starting February 18, 2014, Bitbucket will remove the ability for
individuals to log into a team with a username/email and password.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Insert your own &lt;a href="http://www.unicode.org/emoji/charts/emoji-list.html#1f937"&gt;Unicode shrug
character&lt;/a&gt;
here.&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Creating new repositories failed, but, for instance, creating a
repo using my account (as a team administrator), then logging in as the
"team account" and using the team account to delete the test repo was
successful. I didn't test removing team members, but don't see why this
would have failed.&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</summary><category term="Bitbucket"></category><category term="security"></category></entry><entry><title>Switching BitLocker protection methods without re-encrypting</title><link href="http://www.stevenmaude.co.uk/posts/switching-bitlocker-protection-methods-without-re-encrypting" rel="alternate"></link><published>2017-02-04T17:54:00+00:00</published><updated>2017-02-04T17:54:00+00:00</updated><author><name>Steven Maude</name></author><id>tag:www.stevenmaude.co.uk,2017-02-04:posts/switching-bitlocker-protection-methods-without-re-encrypting</id><summary type="html">&lt;h2 id="overzealous-tpm-protection"&gt;Overzealous TPM protection&lt;/h2&gt;
&lt;p&gt;I'd set up BitLocker for someone using the Trusted Platform Module (TPM)
in their laptop with a PIN&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt; to decrypt the drive. Unfortunately, they
found that, after some time, the system tended to lock the PIN out,
unless they used a recovery key to bypass the TPM and PIN access
altogether.&lt;/p&gt;
&lt;p&gt;As far as I can tell, this is some feature of the TPM in this particular
laptop where too many incorrectly entered passwords results in the TPM
locking out for some lengthy and possibly indefinite amount of time.
Perhaps even permanently. I don't think this is the case where incorrect
passwords are continually entered in a short time period, but where
incorrect attempts over a longer period are cumulatively logged.&lt;/p&gt;
&lt;p&gt;In this case, this state doesn't seem to get reset even if you
subsequently re-enter the correct password, or unlock with another
method. (It seems reasonable that the TPM's unaware of whether
BitLocker's been unlocked or not by other means.)&lt;/p&gt;
&lt;h2 id="fixing-the-tpm"&gt;Fixing the TPM&lt;/h2&gt;
&lt;p&gt;You can rectify this by &lt;a href="https://technet.microsoft.com/en-us/library/dd851452(v=ws.11).aspx"&gt;resetting the TPM
lockout&lt;/a&gt;
but this is only a temporary fix. Again, after some number of password
failures the lockout may happen again. My conclusion in this case is
that, although disabling the TPM makes the system slightly less secure,
the greatest threat here is not an unauthorised user accessing the data,
but an authorised user being unable to access the data. Switching to
just a password unlock then seems more sensible. I wouldn't recommend
this downgrade in security otherwise.&lt;/p&gt;
&lt;p&gt;At first look, you might think that this is a chore to switch. There's
no obvious way of doing this in the BitLocker options for the drive, or
under Control Panel, and your instinct might be to decrypt the drive and
encrypt again. That can be time consuming, especially with large drives.&lt;/p&gt;
&lt;h2 id="using-manage-bde-to-change-key-protection-methods"&gt;Using manage-bde to change key protection methods&lt;/h2&gt;
&lt;p&gt;Instead, you can run the command line utility:
&lt;a href="https://technet.microsoft.com/en-us/library/ff829848(v=ws.10).aspx"&gt;manage-bde&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Since TPM plus PIN, or recovery key (or some other method of securing
your BitLocker encryption key) are key protection methods, Microsoft
terms them "protectors". Also, here we are looking at removing a TPM and
PIN protector, but you can use manage-bde to handle any BitLocker
protector.&lt;/p&gt;
&lt;p&gt;Specifically, you want to remove the existing TPM and PIN protector:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;manage-bde -protectors -delete &amp;lt;Drive&amp;gt; -tpmandpin
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You have to do this first, as it's not possible to have both TPM and PIN
protector, and a password protector.&lt;/p&gt;
&lt;p&gt;(A caution that &lt;code&gt;-delete&lt;/code&gt; without specifying &lt;code&gt;-type&lt;/code&gt; removes all
protectors and then will disable protection, so that you can still
access your drive in future. If you do that, you'll need to add new
protectors, as below, and you'll need to add new recovery protectors,
should you wish. You can do by specifying &lt;code&gt;-recoverypassword&lt;/code&gt; for a
numerical recovery code, or &lt;code&gt;-recoverykey&lt;/code&gt; for an external key in the
&lt;code&gt;-add&lt;/code&gt; command below. And then you must enable the protectors again with
&lt;code&gt;manage-bde -protectors -enable&lt;/code&gt;, including new recovery keys should you
wish to have them.)&lt;/p&gt;
&lt;p&gt;Next, add a new protector, e.g. a password:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;manage-bde -protectors -add &amp;lt;Drive&amp;gt; -password
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;(&lt;code&gt;C:&lt;/code&gt; is the most likely &lt;code&gt;&amp;lt;Drive&amp;gt;&lt;/code&gt; value here.)&lt;/p&gt;
&lt;p&gt;You'll be prompted to enter, and then confirm, the new password. Now,
you'll have a password protector, which won't be subject to a TPM
lockout, as we wanted.&lt;/p&gt;
&lt;p&gt;Finally, you can also check BitLocker status:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;manage-bde -protectors -status
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;to confirm that the drive is encrypted, and which key protectors are
active.&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Well, password. You can configure Group Policy to allow passwords
with TPM, instead of just numerical PINs. Microsoft's documentation
always refers to this option as "TPM and PIN" regardless. This doesn't
change the BitLocker prompt: it still asks for a PIN.&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</summary><category term="BitLocker"></category><category term="manage-bde"></category></entry><entry><title>Blocking URLs in emails from being opened in Thunderbird</title><link href="http://www.stevenmaude.co.uk/posts/blocking-urls-in-emails-from-being-opened-in-thunderbird" rel="alternate"></link><published>2017-01-29T14:40:00+00:00</published><updated>2017-01-29T14:40:00+00:00</updated><author><name>Steven Maude</name></author><id>tag:www.stevenmaude.co.uk,2017-01-29:posts/blocking-urls-in-emails-from-being-opened-in-thunderbird</id><summary type="html">&lt;p&gt;I'd got some unwanted spam message and wondered if it was possible to
stop accidental clicking on any URLs that are displayed in those cases.&lt;/p&gt;
&lt;p&gt;Turns out you can easily.&lt;/p&gt;
&lt;p&gt;Go to the Edit menu &amp;gt; Preferences &amp;gt; Advanced &amp;gt; Config Editor. Skip past
the warning about changing advanced settings if it's displayed (you must
have already disabled it previously, if you don't see this).&lt;/p&gt;
&lt;p&gt;Search for network.protocol-handler.external-default, right click the
option of that name that appears under Preference Name and select Toggle
to change it from the default (true) to false.&lt;/p&gt;
&lt;p&gt;Now, if you try to click on a URL now that's displayed in an email,
nothing will happen; your web browser won't open. However, you can
always copy the URL and paste into a browser yourself.&lt;/p&gt;</summary><category term="Thunderbird"></category></entry><entry><title>The buzz (and hum) of learning a new instrument</title><link href="http://www.stevenmaude.co.uk/posts/the-buzz-and-hum-of-learning-a-new-instrument" rel="alternate"></link><published>2017-01-21T18:41:00+00:00</published><updated>2017-01-21T18:41:00+00:00</updated><author><name>Steven Maude</name></author><id>tag:www.stevenmaude.co.uk,2017-01-21:posts/the-buzz-and-hum-of-learning-a-new-instrument</id><summary type="html">&lt;p&gt;Because I want to improve my skills in producing music, I've started taking
piano lessons. To start out with, I'm using a borrowed 61 key, touch sensitive
keyboard. I'd read around about this. Some people suggest you should always
learn on a piano, but my teacher suggested that's not necessary when first
starting out, at least until reaching ABRSM Grade 1 level. This has the benefit
of not having to invest a substantial amount of money into a digital piano,
should learning prove too difficult.&lt;/p&gt;
&lt;p&gt;The first thing you realise when practising is that it's unlikely that anyone
else within hearing distance is going to appreciate the false starts and wrong
notes of a beginner playing piano. This is a big plus of keyboards or digital
pianos: a headphone socket means you can practise without irritating anyone
nearby.&lt;/p&gt;
&lt;p&gt;So, duly plugging headphones in, I realised there was a substantial hum
(possibly ground hum) from the keyboard's output, even at zero volume,
and white noise which appears as the volume is cranked up. The same
happens in the speaker output, but is much less apparent and distracting
as it tends to get masked by ambient background noise.&lt;/p&gt;
&lt;p&gt;I'm usually quite fussy about unwanted noise, but I found this particularly
distracting when trying to concentrate. I would also say that you do tend to
get used to it over time and can maybe forget it's there a little, but ideally
I was looking to reduce or eliminate it.&lt;/p&gt;
&lt;h2 id="quietening-things-down"&gt;Quietening things down&lt;/h2&gt;
&lt;h3 id="solutions-i-considered-but-didnt-try"&gt;Solutions I considered but didn't try&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Try another power supply. It's possible that this might not fix it, if
  the power supply isn't the source, so I didn't actually buy another to
  test this theory. (In this case, the keyboard can be powered by a
  substantial number of batteries, which would be an ideal test to
  diagnose whether the power supply is at fault here.)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Route the keyboard to a PC via MIDI to USB, play the keyboard via a
  digital audio workstation, and use a computer audio output instead of
  the keyboard's own output. This would work if you have PC audio that
  is noise-free. But, it means you then have to rely on having a PC
  around and powered on. Instead, I'd prefer to use an instrument
  directly; this way it actually keeps me away from a computer for once.
  If you're on a Windows PC, also bear in mind that you'll likely need
  decent ASIO drivers for your audio hardware, otherwise you might have
  to deal with considerable input latency.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="solutions-i-used"&gt;Solutions I used&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Use worse headphones. The budget Monoprice headphones I have did seem
  to reduce the noise a little compared with the Sennheiser HD25 I'd
  first tested out.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add a ground loop isolator into the headphone socket on the keyboard
  and plug headphones into that. This did the trick for me. Since it's
  filtering the signal, it does also attenuate the volume, but that's a
  small price to pay for quiet. The going rate seems to be under £5 for
  cheap and cheerful generic kit, you can spend more on ones from the
  likes of Behringer, while some people even make their own DIY
  solutions.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</summary><category term="keyboard"></category><category term="music"></category><category term="noise"></category></entry><entry><title>Installing pip, virtualenv and virtualenvwrapper tidily in Linux</title><link href="http://www.stevenmaude.co.uk/posts/installing-pip-virtualenv-and-virtualenvwrapper-tidily-in-linux" rel="alternate"></link><published>2016-12-30T00:10:00+00:00</published><updated>2016-12-30T00:10:00+00:00</updated><author><name>Steven Maude</name></author><id>tag:www.stevenmaude.co.uk,2016-12-30:posts/installing-pip-virtualenv-and-virtualenvwrapper-tidily-in-linux</id><summary type="html">&lt;p&gt;When I reinstalled my PC, I was thinking about the "cleanest" way that I
could get the Python tools I needed on there. Previously, I'd used the
pip bundled in the Ubuntu repositories, then found it was left to
languish, and was hideously out of date. (I think it is possible to
update if you've installed that way, but involves using &lt;code&gt;sudo pip
install -U&lt;/code&gt; all the time, which didn't seem sensible.)&lt;/p&gt;
&lt;p&gt;A better option might be to install pip directly from the installer
that's provided by the pip developers, using pip to install virtualenv
and virtualenvwrapper, and then using the virtualenv tools to create
virtualenvs to actually install Python packages for development. This
way should create the minimum level of clutter you're adding to your
system's Python installation.&lt;/p&gt;
&lt;p&gt;But, reading around, the suggestions here on &lt;a href="https://stackoverflow.com/questions/4324558/whats-the-proper-way-to-install-pip-virtualenv-and-distribute-for-python"&gt;doing a clean
installation&lt;/a&gt;
seemed an even better idea. You download the virtualenv package from
PyPI yourself, use Python to run the &lt;code&gt;virtualenv&lt;/code&gt; Python code directly
and use that to create a "bootstrap" virtualenv that you can then create
new virtualenvs from.  Note that these virtualenvs all include pip; no
need for extra work to get it installed.&lt;/p&gt;
&lt;p&gt;All of this is possible without doing any installation into the system's
Python at all, not even requiring any &lt;code&gt;pip install --user&lt;/code&gt; commands.
It's pretty simple to do. If you want to follow this along further and
add virtualenvwrapper too, see the Stack Overflow post for more details
(essentially, you need to get a copy of virtualenv via downloading it,
e.g. from PyPI, using curl or a web browser and then run &lt;code&gt;python
virtualenv.py $YOUR_CHOSEN_VIRTUALENV_DIRECTORY&lt;/code&gt;), then continue here.&lt;/p&gt;
&lt;h2 id="getting-virtualenvwrapper-working"&gt;Getting virtualenvwrapper working&lt;/h2&gt;
&lt;p&gt;Though &lt;a href="https://virtualenvwrapper.readthedocs.io/en/latest/install.html#basic-installation"&gt;it's not recommended in the
documentation&lt;/a&gt;,
someone in the Stack Overflow comments said they'd got it working, so I
thought worth trying.&lt;/p&gt;
&lt;p&gt;What I did was create a Python virtualenv purely for virtualenvwrapper
using the method in the Stack Overflow answer. I called the virtualenv
"virtualenvwrapper" and created it inside &lt;code&gt;$HOME/.virtualenvs&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Next, I then activated this new virtualenv using &lt;code&gt;source
$HOME/.virtualenvs/virtualenvwrapper/bin/activate&lt;/code&gt; and did &lt;code&gt;pip install
virtualenvwrapper&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If you modify your shell startup files as suggested in the
virtualenvwrapper documentation, you'll find you get an error:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;virtualenvwrapper.sh: There was a problem running the initialization
hooks.     

If Python could not import the module virtualenvwrapper.hook_loader,
check that virtualenvwrapper has been installed for
VIRTUALENVWRAPPER_PYTHON=$VIRTUALENVWRAPPER_PYTHON and that PATH is
set properly.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As virtualenvwrapper isn't installed in the default Python, the script
looks for it and understandably can't find it. It's a simple fix: just
activate the virtualenvwrapper virtualenv before this shell script is
sourced.&lt;/p&gt;
&lt;p&gt;Even if you immediately deactivate the virtualenvwrapper virtualenv
again, you'll still have commands like &lt;code&gt;workon&lt;/code&gt; that function correctly
in your shell environment.&lt;/p&gt;
&lt;p&gt;So what I first tried was doing what the virtualenvwrapper documentation
suggests, and modifying shell startup files, but with extra activate and
deactivate steps:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;WORKON_HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;/.virtualenvs
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;PROJECT_HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;/.local/src 
&lt;span class="nb"&gt;source&lt;/span&gt; &lt;span class="nv"&gt;$HOME&lt;/span&gt;/.virtualenvs/virtualenvwrapper/bin/activate
&lt;span class="nb"&gt;source&lt;/span&gt; &lt;span class="nv"&gt;$HOME&lt;/span&gt;/.virtualenvs/virtualenvwrapper/bin/virtualenvwrapper.sh
deactivate                                                          
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You will need to switch to some virtualenv first with the virtualenv
package installed, before commands that require the Python virtualenv
package to be installed will work (e.g. to create new virtualenvs). It's
simple enough to do &lt;code&gt;workon py3venv&lt;/code&gt; and then e.g. &lt;code&gt;mkvirtualenv
virtualenv_name&lt;/code&gt; when you want to create one. However, &lt;code&gt;workon&lt;/code&gt; to
switch virtualenvs should always work.&lt;/p&gt;
&lt;h2 id="limitations-with-this-clean-solution"&gt;Limitations with this clean solution&lt;/h2&gt;
&lt;p&gt;This works pretty well, but:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;The bootstrap environments are the ones you base your other
   virtualenvs on.  If, for some reason, you suddenly need some system
   site package installed for some particular Python package, then
   you'll need to create a new bootstrap virtualenv first, with the
   &lt;code&gt;--system-site-packages&lt;/code&gt; option. (Even if you've already got a
   "system site packages" virtualenv, if you subsequently updated the
   system packages and want a virtualenv to reflect this, you'll have to
   go back to the bootstrapping stage.)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;You'll likely need to recreate the bootstrap environments in addition
   to any actual in-use virtualenvs if you want to move to a new Python
   version. I've read in places things that suggest the Python binary is
   a symlink to the system one; on my current virtualenvs, there are
   only symlinks to the local virtualenv copy of the python binary.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="fixing-virtualenvwrapper-slowing-terminal-startup"&gt;Fixing virtualenvwrapper slowing terminal startup&lt;/h2&gt;
&lt;p&gt;virtualenvwrapper does slightly delay bash starting up. On
investigation, this is principally due to virtualenvwrapper.sh itself,
not the activate/deactivate step. You can check this by running &lt;code&gt;time&lt;/code&gt;
on each of the commands, &lt;code&gt;source bin/activate&lt;/code&gt; and &lt;code&gt;deactivate&lt;/code&gt; are
basically instant, whereas this script slows things down considerably.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;time&lt;/span&gt; &lt;span class="nb"&gt;source&lt;/span&gt; &lt;span class="nv"&gt;$HOME&lt;/span&gt;/.virtualenvs/virtualenvwrapper/bin/virtualenvwrapper.sh

real    0m0.304s
user    0m0.248s
sys     0m0.032s
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;A 0.3 s delay isn't particularly long. But, for me, it makes bash feel
slightly less snappy on opening a new terminal.&lt;/p&gt;
&lt;p&gt;To solve this, you can use the &lt;a href="https://virtualenvwrapper.readthedocs.io/en/latest/install.html#lazy-loading"&gt;"lazy
loading"&lt;/a&gt;
script provided with virtualenvwrapper. For my setup, this means I would
need to hack that lazy loading script to add the activate and deactivate
command there.&lt;/p&gt;
&lt;p&gt;I tried this and it did work. But, it didn't seem like a good solution.
In part, it just felt hacky and, more importantly, these commands would
be removed if you upgrade virtualenvwrapper, breaking it until you again
hacked the script.&lt;/p&gt;
&lt;p&gt;Instead, my preferred option to work around the slightly slow loading
was to create another script that I can &lt;code&gt;source&lt;/code&gt; whenever wanting to
work with Python virtualenvs:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/sh -e&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;WORKON_HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;/.virtualenvs
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;PROJECT_HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;/.local/src
&lt;span class="nb"&gt;source&lt;/span&gt; &lt;span class="nv"&gt;$HOME&lt;/span&gt;/.virtualenvs/venvwrapper/bin/activate
&lt;span class="nb"&gt;source&lt;/span&gt; &lt;span class="nv"&gt;$HOME&lt;/span&gt;/.virtualenvs/venvwrapper/bin/virtualenvwrapper.sh
deactivate
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This is less direct. You can't just directly access virtualenvs.
Insteaad, you must source this script first so that you can then
&lt;code&gt;workon&lt;/code&gt; a virtualenv to &lt;code&gt;workon&lt;/code&gt;. However, it keeps the clean install
we have made, doesn't slow bash from loading at all, and isn't a hack of
the existing virtualenvwrapper. Provided we keep it installed in the
same place, it'll work.&lt;/p&gt;
&lt;h2 id="keeping-clean"&gt;Keeping clean&lt;/h2&gt;
&lt;p&gt;Despite the few drawbacks, I do like the idea of this approach overall.
You don't even need to install any Python packages, even as a user, into
Python outside of a virtualenv.&lt;/p&gt;
&lt;p&gt;Bear in mind if you're intent on being particularly rigorous in keeping
your system Python clean: installing software that is built on Python
via your package manager (e.g. apt) may well end up pulling in the
package manager's version of dependencies that the software may use. A
way around this is to install whatever software you want to use in a
virtualenv instead manually, although this may be awkward if that
software uses system packages.&lt;/p&gt;</summary><category term="Linux"></category><category term="Ubuntu"></category><category term="Python"></category><category term="pip"></category><category term="virtualenv"></category><category term="virtualenvwrapper"></category></entry></feed>